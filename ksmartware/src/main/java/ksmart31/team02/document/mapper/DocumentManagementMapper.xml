<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="ksmart31.team02.document.mapper.DocumentManagementMapper">
	<!-- 기안문서 삭제 -->
	<delete id="deleteDraftDocument"
			parameterType="ksmart31.team02.document.vo.DraftDocument">
		DELETE FROM draft_document 
		WHERE draft_document_code=#{draftDocumentCode}
	</delete>

	<!-- 기안문서 조회(워크플로우 문서 관리) -->
	<select id="selectDraftDocument"
			resultType="ksmart31.team02.document.vo.DraftDocument">
		SELECT draft_document_code AS draftDocumentCode
			, draft_document_file_save_name AS draftDocumentFileSaveName
			, draft_document_status AS draftDocumentStatus
			, draft_document_final_approval_member_name AS draftDocumentFinalApprovalMemberName
			, draft_document_final_approval_date AS draftDocumentFinalApprovalDate
			, draft_document_member_id AS draftDocumentMemberId
			, draft_document_member_name AS draftDocumentMemberName
			, draft_document_date AS draftDocumentDate
		FROM draft_document
	</select>

	<!-- 관리자 결재선 관리(공통프로세스 목록) -->
	<select id="selectApprovalProcess"
			resultType="ksmart31.team02.document.vo.ApprovalProcess">
		SELECT approval_process_code AS approvalProcessCode
			, approval_process_name AS approvalProcessName
		FROM approval_process
	</select>
	
	<!-- 문서양식 목록 페이징시 사용 -->
	<select id="selectDocumentFormCount" resultType="int">
        SELECT COUNT(*) FROM document_form
    </select>

	<!-- 문서양식 목록 -->
	<select id="selectDocumentForm"
			parameterType="String"
			resultType="ksmart31.team02.document.vo.DocumentForm">
		SELECT document_form_code AS documentFormCode
			, document_form_category_code AS documentFormCategoryCode
			, document_form_category_name AS documentFormCategoryName
			, document_form_name AS documentFormName
			, document_form_date AS documentFormDate
		FROM document_form
		WHERE document_form_category_code=#{documentFormCategoryCode}
		ORDER BY document_form_date DESC
	</select>

	<!-- 공통양식 카테고리 목록 -->
	<select id="selectDocumentFormCategory"
			parameterType="Integer"
			resultType="ksmart31.team02.document.vo.DocumentFormCategory">
		SELECT document_form_category_code AS documentFormCategoryCode
			, document_form_category_name AS documentFormCategoryName
		FROM document_form_category
	</select>
</mapper>